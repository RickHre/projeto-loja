{% extends 'base.html' %}

{% block title %}Editar Cliente{% endblock %}

{% block head %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/novoCliente.css') }}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
{% endblock %}

{% block breadcrumb %}
    <a href="{{ url_for('cliente.listar_clientes') }}">CRM</a> / <a href="{{ url_for('cliente.listar_clientes') }}">MEUS CLIENTES</a> / <span>EDITAR CLIENTE</span>
{% endblock %}

{% block title_icon %}pencil-fill{% endblock %}

{% block page_title %}EDITAR CLIENTE{% endblock %}

{% block content %}
    <section class="form-section">
        {% with messages = get_flashed_messages(with_categories=true) %}
            <script id="flash-messages-data" type="application/json">
                [
                {% for cat, msg in messages %}
                    {"category": "{{ cat }}", "message": "{{ msg }}"}{% if not loop.last %},{% endif %}
                {% endfor %}
                ]
            </script>
        {% endwith %}
        <h3>DADOS PESSOAIS</h3>
        <div class="separator"></div>
        <form class="new-client-form" method="post" action="{{ url_for('cliente.atualizar_cliente', cliente_id=cliente.id) }}">
            <div class="form-row">
                <div class="form-group">
                    <label for="nome_completo">NOME COMPLETO</label>
                    <input type="text" id="nome_completo" name="nome_completo" value="{{ cliente.nome_completo }}">
                </div>
                <div class="form-group">
                    <label for="email">EMAIL</label>
                    <input type="email" id="email" name="email" value="{{ cliente.email }}">
                </div>
                <div class="form-group">
                    <label for="nascimento">NASCIMENTO</label>
                    <input type="date" id="nascimento" name="nascimento" value="{{ cliente.nascimento }}">
                </div>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label for="cpf">CPF</label>
                    <input type="text" id="cpf" name="cpf" value="{{ cliente.cpf }}">
                </div>
                <div class="form-group">
                    <label for="telefone">TELEFONE</label>
                    <input type="tel" id="telefone" name="telefone" value="{{ cliente.telefone }}">
                </div>
            </div>
            <h3>ENDEREÇO</h3>
            <div class="separator"></div>
            <div class="form-row address-row">
                <div class="form-group street-group">
                    <label for="rua">RUA</label>
                    <input type="text" id="rua" name="rua" value="{{ cliente.rua }}">
                </div>
                <div class="form-group number-group">
                    <label for="numero">N°</label>
                    <input type="number" id="numero" name="numero" value="{{ cliente.numero }}">
                </div>
                <div class="form-group city-group">
                    <label for="cidade">CIDADE</label>
                    <input type="text" id="cidade" name="cidade" value="{{ cliente.cidade }}">
                </div>
            </div>
            <div class="actions">
                <a href="{{ url_for('cliente.listar_clientes') }}" class="cancel-button">CANCELAR</a>
                <button type="submit" class="save-button"><i class="bi bi-check-lg"></i> SALVAR ALTERAÇÕES</button>
            </div>
        </form>
    </section>
{% endblock %}

{% block scripts %}
    <script src="{{ url_for('static', filename='js/flash_messages.js') }}"></script>
{% endblock %}